{
	"id": "SUSE-SU-2022:3401-1",
	"modified": "2022-09-26T15:19:04Z",
	"published": "2022-09-26T15:19:04Z",
	"related": [
		"CVE-2021-36690",
		"CVE-2022-35737"
	],
	"summary": "Security update for sqlite3",
	"details": "This update for sqlite3 fixes the following issues:\n\nSecurity issues fixed:\n\n- CVE-2022-35737: Fixed an array-bounds overflow if billions of bytes are used in a string argument to a C API (bnc#1201783).\n- CVE-2021-36690: Fixed an issue with the SQLite Expert extension when a column has no collating sequence (bsc#1189802).\n  \n- Package the Tcl bindings here again so that we only ship one copy of SQLite (bsc#1195773).\n\nsqlite3 was update to 3.39.3:\n\n* Use a statement journal on DML statement affecting two or more\n  database rows if the statement makes use of a SQL functions\n  that might abort.\n* Use a mutex to protect the PRAGMA temp_store_directory and\n  PRAGMA data_store_directory statements, even though they are\n  decremented and documented as not being threadsafe.\n\nUpdate to 3.39.2:\n\n* Fix a performance regression in the query planner associated\n  with rearranging the order of FROM clause terms in the\n  presences of a LEFT JOIN.\n* Apply fixes for CVE-2022-35737, Chromium bugs 1343348 and\n  1345947, forum post 3607259d3c, and other minor problems\n  discovered by internal testing. [boo#1201783]\n\nUpdate to 3.39.1:\n\n* Fix an incorrect result from a query that uses a view that\n  contains a compound SELECT in which only one arm contains a\n  RIGHT JOIN and where the view is not the first FROM clause term\n  of the query that contains the view\n* Fix a long-standing problem with ALTER TABLE RENAME that can\n  only arise if the sqlite3_limit(SQLITE_LIMIT_SQL_LENGTH) is set\n  to a very small value.\n* Fix a long-standing problem in FTS3 that can only arise when\n  compiled with the SQLITE_ENABLE_FTS3_PARENTHESIS compile-time\n  option.\n* Fix the initial-prefix optimization for the REGEXP extension so\n  that it works correctly even if the prefix contains characters\n  that require a 3-byte UTF8 encoding.\n* Enhance the sqlite_stmt virtual table so that it buffers all of\n  its output. \n\nUpdate to 3.39.0:\n\n* Add (long overdue) support for RIGHT and FULL OUTER JOIN\n* Add new binary comparison operators IS NOT DISTINCT FROM and \n  IS DISTINCT FROM that are equivalent to IS and IS NOT, \n  respective, for compatibility with PostgreSQL and SQL standards\n* Add a new return code (value '3') from the sqlite3_vtab_distinct()\n  interface that indicates a query that has both DISTINCT and \n  ORDER BY clauses\n* Added the sqlite3_db_name() interface\n* The unix os interface resolves all symbolic links in database\n  filenames to create a canonical name for the database before\n  the file is opened\n* Defer materializing views until the materialization is actually\n  needed, thus avoiding unnecessary work if the materialization\n  turns out to never be used\n* The HAVING clause of a SELECT statement is now allowed on any\n  aggregate query, even queries that do not have a GROUP BY\n  clause\n* Many microoptimizations collectively reduce CPU cycles by about\n  2.3%. \n\nUpdate to 3.38.5:\n\n* Fix a blunder in the CLI of the 3.38.4 release\n\nUpdate to 3.38.4:\n\n* fix a byte-code problem in the Bloom filter pull-down\n  optimization added by release 3.38.0 in which an error in the\n  byte code causes the byte code engine to enter an infinite loop\n  when the pull-down optimization encounters a NULL key   \n\nUpdate to 3.38.3:\n\n* Fix a case of the query planner be overly aggressive with\n  optimizing automatic-index and Bloom-filter construction,\n  using inappropriate ON clause terms to restrict the size of the\n  automatic-index or Bloom filter, and resulting in missing rows\n  in the output.\n* Other minor patches. See the timeline for details. \n\nUpdate to 3.38.2:\n\n* Fix a problem with the Bloom filter optimization that might\n  cause an incorrect answer when doing a LEFT JOIN with a WHERE\n  clause constraint that says that one of the columns on the\n  right table of the LEFT JOIN is NULL.\n* Other minor patches.\n\n- Package the Tcl bindings here again so that we only ship one copy\nof SQLite (bsc#1195773).\n\nUpdate to 3.38.1:\n\n* Fix problems with the new Bloom filter optimization that might\n  cause some obscure queries to get an incorrect answer.\n* Fix the localtime modifier of the date and time functions so\n  that it preserves fractional seconds.\n* Fix the sqlite_offset SQL function so that it works correctly\n  even in corner cases such as when the argument is a virtual\n  column or the column of a view.\n* Fix row value IN operator constraints on virtual tables so that\n  they work correctly even if the virtual table implementation\n  relies on bytecode to filter rows that do not satisfy the\n  constraint.\n* Other minor fixes to assert() statements, test cases, and\n  documentation. See the source code timeline for details.\n\nUpdate to 3.38.0\n\n* Add the -> and ->> operators for easier processing of JSON\n* The JSON functions are now built-ins\n* Enhancements to date and time functions\n* Rename the printf() SQL function to format() for better\n  compatibility, with alias for backwards compatibility.\n* Add the sqlite3_error_offset() interface for helping localize\n  an SQL error to a specific character in the input SQL text \n* Enhance the interface to virtual tables \n* CLI columnar output modes are enhanced to correctly handle tabs\n  and newlines embedded in text, and add options like '--wrap N',\n  '--wordwrap on', and '--quote' to the columnar output modes.\n* Query planner enhancements using a Bloom filter to speed up \n  large analytic queries, and a balanced merge tree to evaluate\n  UNION or UNION ALL compound SELECT statements that have an\n  ORDER BY clause.\n* The ALTER TABLE statement is changed to silently ignores\n  entries in the sqlite_schema table that do not parse when\n  PRAGMA writable_schema=ON\n\nUpdate to 3.37.2:\n\n* Fix a bug introduced in version 3.35.0 (2021-03-12) that can\n  cause database corruption if a SAVEPOINT is rolled back while\n  in PRAGMA temp_store=MEMORY mode, and other changes are made,\n  and then the outer transaction commits\n* Fix a long-standing problem with ON DELETE CASCADE and ON \n  UPDATE CASCADE in which a cache of the bytecode used to\n  implement the cascading change was not being reset following a\n  local DDL change\n\nUpdate to 3.37.1:\n\n* Fix a bug introduced by the UPSERT enhancements of version\n  3.35.0 that can cause incorrect byte-code to be generated for\n  some obscure but valid SQL, possibly resulting in a NULL-\n  pointer dereference.\n* Fix an OOB read that can occur in FTS5 when reading corrupt\n  database files.\n* Improved robustness of the --safe option in the CLI.\n* Other minor fixes to assert() statements and test cases. \n\nUpdate to 3.37.0:\n\n* STRICT tables provide a prescriptive style of data type\n  management, for developers who prefer that kind of thing.\n* When adding columns that contain a CHECK constraint or a\n  generated column containing a NOT NULL constraint, the\n  ALTER TABLE ADD COLUMN now checks new constraints against\n  preexisting rows in the database and will only proceed if no\n  constraints are violated.\n* Added the PRAGMA table_list statement.\n* Add the .connection command, allowing the CLI to keep multiple\n  database connections open at the same time.\n* Add the --safe command-line option that disables dot-commands\n  and SQL statements that might cause side-effects that extend\n  beyond the single database file named on the command-line.\n* CLI: Performance improvements when reading SQL statements that\n  span many lines.\n* Added the sqlite3_autovacuum_pages() interface.\n* The sqlite3_deserialize() does not and has never worked\n  for the TEMP database. That limitation is now noted in the\n  documentation.\n* The query planner now omits ORDER BY clauses on subqueries and\n  views if removing those clauses does not change the semantics\n  of the query.\n* The generate_series table-valued function extension is modified\n  so that the first parameter ('START') is now required. This is\n  done as a way to demonstrate how to write table-valued\n  functions with required parameters. The legacy behavior is\n  available using the -DZERO_ARGUMENT_GENERATE_SERIES\n  compile-time option.\n* Added new sqlite3_changes64() and sqlite3_total_changes64()\n  interfaces.\n* Added the SQLITE_OPEN_EXRESCODE flag option to sqlite3_open_v2().\n* Use less memory to hold the database schema.\n* bsc#1189802, CVE-2021-36690: Fix an issue with the SQLite Expert\n  extension when a column has no collating sequence.\n",
	"affected": [
		{
			"package": {
				"ecosystem": "SUSE:OpenStack Cloud 9",
				"name": "sqlite3",
				"purl": "purl:rpm/suse/sqlite3&distro=SUSE%20OpenStack%20Cloud%209"
			},
			"ranges": [
				{
					"type": "ECOSYSTEM",
					"events": [
						{
							"introduced": "0"
						},
						{
							"fixed": "3.39.3-9.23.1"
						}
					]
				}
			],
			"ecosystem_specific": {
				"binaries": [
					{
						"libsqlite3-0": "3.39.3-9.23.1",
						"libsqlite3-0-32bit": "3.39.3-9.23.1",
						"sqlite3": "3.39.3-9.23.1",
						"sqlite3-devel": "3.39.3-9.23.1",
						"sqlite3-tcl": "3.39.3-9.23.1"
					}
				]
			}
		},
		{
			"package": {
				"ecosystem": "SUSE:OpenStack Cloud Crowbar 9",
				"name": "sqlite3",
				"purl": "purl:rpm/suse/sqlite3&distro=SUSE%20OpenStack%20Cloud%20Crowbar%209"
			},
			"ranges": [
				{
					"type": "ECOSYSTEM",
					"events": [
						{
							"introduced": "0"
						},
						{
							"fixed": "3.39.3-9.23.1"
						}
					]
				}
			],
			"ecosystem_specific": {
				"binaries": [
					{
						"libsqlite3-0": "3.39.3-9.23.1",
						"libsqlite3-0-32bit": "3.39.3-9.23.1",
						"sqlite3": "3.39.3-9.23.1",
						"sqlite3-devel": "3.39.3-9.23.1",
						"sqlite3-tcl": "3.39.3-9.23.1"
					}
				]
			}
		},
		{
			"package": {
				"ecosystem": "SUSE:Linux Enterprise Server for SAP Applications 12 SP4",
				"name": "sqlite3",
				"purl": "purl:rpm/suse/sqlite3&distro=SUSE%20Linux%20Enterprise%20Server%20for%20SAP%20Applications%2012%20SP4"
			},
			"ranges": [
				{
					"type": "ECOSYSTEM",
					"events": [
						{
							"introduced": "0"
						},
						{
							"fixed": "3.39.3-9.23.1"
						}
					]
				}
			],
			"ecosystem_specific": {
				"binaries": [
					{
						"libsqlite3-0": "3.39.3-9.23.1",
						"libsqlite3-0-32bit": "3.39.3-9.23.1",
						"sqlite3": "3.39.3-9.23.1",
						"sqlite3-devel": "3.39.3-9.23.1",
						"sqlite3-tcl": "3.39.3-9.23.1"
					}
				]
			}
		},
		{
			"package": {
				"ecosystem": "SUSE:Linux Enterprise Software Development Kit 12 SP5",
				"name": "sqlite3",
				"purl": "purl:rpm/suse/sqlite3&distro=SUSE%20Linux%20Enterprise%20Software%20Development%20Kit%2012%20SP5"
			},
			"ranges": [
				{
					"type": "ECOSYSTEM",
					"events": [
						{
							"introduced": "0"
						},
						{
							"fixed": "3.39.3-9.23.1"
						}
					]
				}
			],
			"ecosystem_specific": {
				"binaries": [
					{
						"sqlite3-devel": "3.39.3-9.23.1"
					}
				]
			}
		},
		{
			"package": {
				"ecosystem": "SUSE:Linux Enterprise Server 12 SP2-BCL",
				"name": "sqlite3",
				"purl": "purl:rpm/suse/sqlite3&distro=SUSE%20Linux%20Enterprise%20Server%2012%20SP2-BCL"
			},
			"ranges": [
				{
					"type": "ECOSYSTEM",
					"events": [
						{
							"introduced": "0"
						},
						{
							"fixed": "3.39.3-9.23.1"
						}
					]
				}
			],
			"ecosystem_specific": {
				"binaries": [
					{
						"libsqlite3-0": "3.39.3-9.23.1",
						"libsqlite3-0-32bit": "3.39.3-9.23.1",
						"sqlite3": "3.39.3-9.23.1",
						"sqlite3-devel": "3.39.3-9.23.1",
						"sqlite3-tcl": "3.39.3-9.23.1"
					}
				]
			}
		},
		{
			"package": {
				"ecosystem": "SUSE:Linux Enterprise Server 12 SP3-BCL",
				"name": "sqlite3",
				"purl": "purl:rpm/suse/sqlite3&distro=SUSE%20Linux%20Enterprise%20Server%2012%20SP3-BCL"
			},
			"ranges": [
				{
					"type": "ECOSYSTEM",
					"events": [
						{
							"introduced": "0"
						},
						{
							"fixed": "3.39.3-9.23.1"
						}
					]
				}
			],
			"ecosystem_specific": {
				"binaries": [
					{
						"libsqlite3-0": "3.39.3-9.23.1",
						"libsqlite3-0-32bit": "3.39.3-9.23.1",
						"sqlite3": "3.39.3-9.23.1",
						"sqlite3-devel": "3.39.3-9.23.1",
						"sqlite3-tcl": "3.39.3-9.23.1"
					}
				]
			}
		},
		{
			"package": {
				"ecosystem": "SUSE:Linux Enterprise Server 12 SP4-LTSS",
				"name": "sqlite3",
				"purl": "purl:rpm/suse/sqlite3&distro=SUSE%20Linux%20Enterprise%20Server%2012%20SP4-LTSS"
			},
			"ranges": [
				{
					"type": "ECOSYSTEM",
					"events": [
						{
							"introduced": "0"
						},
						{
							"fixed": "3.39.3-9.23.1"
						}
					]
				}
			],
			"ecosystem_specific": {
				"binaries": [
					{
						"libsqlite3-0": "3.39.3-9.23.1",
						"libsqlite3-0-32bit": "3.39.3-9.23.1",
						"sqlite3": "3.39.3-9.23.1",
						"sqlite3-devel": "3.39.3-9.23.1",
						"sqlite3-tcl": "3.39.3-9.23.1"
					}
				]
			}
		},
		{
			"package": {
				"ecosystem": "SUSE:Linux Enterprise Server 12 SP5",
				"name": "sqlite3",
				"purl": "purl:rpm/suse/sqlite3&distro=SUSE%20Linux%20Enterprise%20Server%2012%20SP5"
			},
			"ranges": [
				{
					"type": "ECOSYSTEM",
					"events": [
						{
							"introduced": "0"
						},
						{
							"fixed": "3.39.3-9.23.1"
						}
					]
				}
			],
			"ecosystem_specific": {
				"binaries": [
					{
						"libsqlite3-0": "3.39.3-9.23.1",
						"libsqlite3-0-32bit": "3.39.3-9.23.1",
						"sqlite3": "3.39.3-9.23.1",
						"sqlite3-devel": "3.39.3-9.23.1",
						"sqlite3-tcl": "3.39.3-9.23.1"
					}
				]
			}
		},
		{
			"package": {
				"ecosystem": "SUSE:Linux Enterprise Server for SAP Applications 12 SP5",
				"name": "sqlite3",
				"purl": "purl:rpm/suse/sqlite3&distro=SUSE%20Linux%20Enterprise%20Server%20for%20SAP%20Applications%2012%20SP5"
			},
			"ranges": [
				{
					"type": "ECOSYSTEM",
					"events": [
						{
							"introduced": "0"
						},
						{
							"fixed": "3.39.3-9.23.1"
						}
					]
				}
			],
			"ecosystem_specific": {
				"binaries": [
					{
						"libsqlite3-0": "3.39.3-9.23.1",
						"libsqlite3-0-32bit": "3.39.3-9.23.1",
						"sqlite3": "3.39.3-9.23.1",
						"sqlite3-devel": "3.39.3-9.23.1",
						"sqlite3-tcl": "3.39.3-9.23.1"
					}
				]
			}
		}
	],
	"references": [
		{
			"type": "ADVISORY",
			"url": "https://www.suse.com/support/update/announcement/2022/suse-su-20223401-1/"
		},
		{
			"type": "REPORT",
			"url": "https://bugzilla.suse.com/1189802"
		},
		{
			"type": "REPORT",
			"url": "https://bugzilla.suse.com/1195773"
		},
		{
			"type": "REPORT",
			"url": "https://bugzilla.suse.com/1201783"
		},
		{
			"type": "WEB",
			"url": "https://www.suse.com/security/cve/CVE-2021-36690"
		},
		{
			"type": "WEB",
			"url": "https://www.suse.com/security/cve/CVE-2022-35737"
		}
	]
}
